{% extends "@desk/layout_edit.html" %}

{% block pageTitle %}
  {{ __('Edit Group') }}
{% endblock %}

{% block formAttribute %}
{{ super() }} id=group-edit-form action="{{ deskUrl('/user/group/save') }}"
{% endblock %}

{% block action %}
    <button type="submit" name="submit" class="btn btn-success">Save Group</button>
    <a href="/desk/user/group" class="btn btn-default">
        <i class="fa fa-times" style=""></i> {{ __('Close') }}
    </a>
{% endblock %}

{% block form %}
<div class="row">
  <input type="hidden" name="group[id]" value="{{ group.id }}">
    <div class="col-md-8">
        <div class="form-group">
           <label for="name" class="control-label">{{ __('Group Name') }}</label>
           <input type="text" name="group[name]" value="{{ group.name }}" class="form-control">
        </div>
        <div class="form-group">
          <label for="description" class="control-label">{{ __('Description') }}</label>
          <textarea name="group[description]" rows="4" cols="40" class="form-control">{{ group.description }}</textarea>
        </div>
    </div>
</div>
<div class="row">

    <div class="col-md-8">
      <h4>{{ __('Permissions') }}</h4>
    </div>
    <div class="clearfix"></div>
    <div class="col-md-8">
      <div class="row">
      {% for ns, permission in permissions %}
      <div class="panel-row col-md-6">
        <div class="panel-item">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">{{ ns }}</h3>
                </div>
                <div class="panel-body" style="max-height:200px;overflow:auto;">
                  <!-- @todo move this inline style --->
                  <ul style="list-style:none;padding:0;warning:0;">
                  {% for id, label in permission %}
                    <li>
                      <div class="checkbox">
                        <label><input type="checkbox" name="group[permissions]" value="{{ id }}"
                          {% if (isExists(id, group.permissions)) %}
                            checked="checked"
                          {% endif %}
                          > {{ label }}</label>
                      </div>
                    </li>
                  {% endfor %}
                  </ul>
                </div>
            </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</div>

{% endblock %}

{% block js %}
    {{ super() }}
    <script type="text/javascript" src="/user/js/group/edit.js"> </script>
{% endblock %}
